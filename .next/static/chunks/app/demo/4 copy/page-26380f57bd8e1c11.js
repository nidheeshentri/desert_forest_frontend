(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4529],{23933:function(e,a,r){Promise.resolve().then(r.bind(r,90376))},90376:function(e,a,r){"use strict";r.r(a);var l=r(57437),s=r(2265),n=r(29501),t=r(15452),i=r.n(t),c=r(83464),d=r(79820),o=r(12381),m=r(40279),h=r(15291),u=r(80670),x=r(33804),j=r(40257);a.default=()=>{let[e,a]=(0,s.useState)([]),[r,t]=(0,s.useState)([]),p=(0,n.cI)({defaultValues:{name:"",message:"",audience:"",templateId:"",templateVariables:[]}}),{handleSubmit:f,control:g,reset:b}=p;(0,s.useEffect)(()=>{fetch("/data/dummyCampaigns.json").then(e=>e.json()).then(e=>a(e))},[]);let[N,C]=(0,s.useState)([{id:"1",name:"Template 1",body:"Hello {{1}}, your order {{2}} has been shipped.",language:"en",locale:"US"},{id:"2",name:"Template 2",body:"Hi {{1}}, your appointment is confirmed for {{2}}.",language:"en",locale:"US"}]),v=async(e,a)=>{let r="".concat(j.env.NEXT_PUBLIC_WHATSAPP_API_URL,"/").concat(j.env.NEXT_PUBLIC_WHATSAPP_PHONE_NUMBER_ID,"/messages"),l={Authorization:"Bearer ".concat(j.env.NEXT_PUBLIC_WHATSAPP_ACCESS_TOKEN),"Content-Type":"application/json"},s=a.map(a=>c.Z.post(r,{messaging_product:"whatsapp",to:a,type:"text",text:{body:e}},{headers:l}));try{await Promise.all(s),alert("Messages sent successfully!")}catch(e){console.error("Error sending messages:",e),alert("Failed to send messages.")}},y=e=>{let a=r.find(a=>a.name===e.audience);a?v(e.message,a.contacts):alert("Audience not found.")};return(0,l.jsx)("div",{className:"min-h-screen p-8 bg-gray-100",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[(0,l.jsxs)(d.Zb,{className:"col-span-1 lg:col-span-3",children:[(0,l.jsx)(d.Ol,{children:(0,l.jsx)(d.ll,{children:"Create Campaign"})}),(0,l.jsx)(d.aY,{children:(0,l.jsx)(n.RV,{...p,children:(0,l.jsxs)("form",{onSubmit:f(r=>{a([...e,r]),b()}),children:[(0,l.jsxs)(u.xJ,{children:[(0,l.jsx)(u.lX,{htmlFor:"template",children:"Message Template"}),(0,l.jsx)(u.NI,{children:(0,l.jsx)(n.Qr,{name:"templateId",control:g,render:e=>{let{field:a}=e;return(0,l.jsxs)(h.Ph,{value:a.value,onValueChange:a.onChange,required:!0,children:[(0,l.jsx)(h.i4,{children:(0,l.jsx)(h.ki,{placeholder:"Select message template"})}),(0,l.jsx)(h.Bw,{children:N.map(e=>(0,l.jsx)(h.Ql,{value:e.id,children:e.name},e.id))})]})}})})]}),(0,l.jsxs)(u.xJ,{children:[(0,l.jsx)(u.lX,{htmlFor:"variables",children:"Template Variables"}),(0,l.jsx)(u.NI,{children:(0,l.jsx)(n.Qr,{name:"templateVariables",control:g,render:e=>{let{field:a}=e;return(0,l.jsx)(m.I,{value:a.value,onChange:a.onChange,placeholder:"Enter variables separated by commas",required:!0})}})})]}),(0,l.jsxs)(u.xJ,{children:[(0,l.jsx)(u.lX,{htmlFor:"name",children:"Campaign Name"}),(0,l.jsx)(u.NI,{children:(0,l.jsx)(n.Qr,{name:"name",control:g,render:e=>{let{field:a}=e;return(0,l.jsx)(m.I,{...a,placeholder:"Enter campaign name",required:!0})}})})]}),(0,l.jsxs)(u.xJ,{children:[(0,l.jsx)(u.lX,{htmlFor:"message",children:"Message"}),(0,l.jsx)(u.NI,{children:(0,l.jsx)(n.Qr,{name:"message",control:g,render:e=>{let{field:a}=e;return(0,l.jsx)(m.I,{...a,placeholder:"Enter campaign message",required:!0})}})})]}),(0,l.jsxs)(u.xJ,{children:[(0,l.jsx)(u.lX,{htmlFor:"audience",children:"Audience"}),(0,l.jsx)(u.NI,{children:(0,l.jsx)(n.Qr,{name:"audience",control:g,render:e=>{let{field:a}=e;return(0,l.jsxs)(h.Ph,{value:a.value,onValueChange:a.onChange,required:!0,children:[(0,l.jsx)(h.i4,{children:(0,l.jsx)(h.ki,{placeholder:"Select audience"})}),(0,l.jsx)(h.Bw,{children:r.map((e,a)=>(0,l.jsx)(h.Ql,{value:e.name,children:e.name},a))})]})}})})]}),(0,l.jsx)(o.z,{type:"submit",children:"Create Campaign"})]})})})]}),(0,l.jsxs)(d.Zb,{className:"col-span-1 lg:col-span-3",children:[(0,l.jsx)(d.Ol,{children:(0,l.jsx)(d.ll,{children:"Manage Campaigns"})}),(0,l.jsx)(d.aY,{children:(0,l.jsxs)(x.iA,{children:[(0,l.jsx)(x.xD,{children:(0,l.jsxs)(x.SC,{children:[(0,l.jsx)(x.ss,{children:"Campaign Name"}),(0,l.jsx)(x.ss,{children:"Message"}),(0,l.jsx)(x.ss,{children:"Audience"}),(0,l.jsx)(x.ss,{children:"Actions"})]})}),(0,l.jsx)(x.RM,{children:e.map((r,s)=>(0,l.jsxs)(x.SC,{children:[(0,l.jsx)(x.pj,{children:r.name}),(0,l.jsx)(x.pj,{children:r.message}),(0,l.jsx)(x.pj,{children:r.audience}),(0,l.jsxs)(x.pj,{children:[(0,l.jsx)(o.z,{variant:"outline",size:"sm",onClick:()=>y(r),children:"Send"}),(0,l.jsx)(o.z,{variant:"outline",size:"sm",onClick:()=>{a(e.filter((e,a)=>a!==s))},children:"Delete"})]})]},s))})]})})]}),(0,l.jsxs)(d.Zb,{className:"col-span-1 lg:col-span-3",children:[(0,l.jsx)(d.Ol,{children:(0,l.jsx)(d.ll,{children:"Import Contacts"})}),(0,l.jsx)(d.aY,{children:(0,l.jsx)("input",{type:"file",accept:".csv",onChange:e=>{var a;let l=null===(a=e.target.files)||void 0===a?void 0:a[0];l&&i().parse(l,{complete:e=>{let a=e.data.map(e=>e[0]),l=prompt("Please enter a name for the new audience");l&&t([...r,{name:l,contacts:a}])}})}})})]})]})})}},33804:function(e,a,r){"use strict";r.d(a,{RM:function(){return c},SC:function(){return d},iA:function(){return t},pj:function(){return m},ss:function(){return o},xD:function(){return i}});var l=r(57437),s=r(2265),n=r(93448);let t=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)("div",{className:"relative w-full overflow-auto",children:(0,l.jsx)("table",{ref:a,className:(0,n.cn)("w-full caption-bottom text-sm",r),...s})})});t.displayName="Table";let i=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)("thead",{ref:a,className:(0,n.cn)("[&_tr]:border-b",r),...s})});i.displayName="TableHeader";let c=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)("tbody",{ref:a,className:(0,n.cn)("[&_tr:last-child]:border-0",r),...s})});c.displayName="TableBody",s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)("tfoot",{ref:a,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})}).displayName="TableFooter";let d=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)("tr",{ref:a,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s})});d.displayName="TableRow";let o=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)("th",{ref:a,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...s})});o.displayName="TableHead";let m=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)("td",{ref:a,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...s})});m.displayName="TableCell",s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,l.jsx)("caption",{ref:a,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",r),...s})}).displayName="TableCaption"}},function(e){e.O(0,[7037,1182,3464,4237,9501,6075,2971,2117,1744],function(){return e(e.s=23933)}),_N_E=e.O()}]);